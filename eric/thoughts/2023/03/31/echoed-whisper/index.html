<!DOCTYPE html>
<html lang="en-US">
<head profile="http://gmpg.org/xfn/1">
<title>Echoed Whisper  &#8211;  Eric’s Archived Thoughts</title>
<meta name="generator" content="WordPress 6.3.1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="shortcut icon" href="/favicon.ico"><link rel="home" href="http://meyerweb.com/" title="Home" ><link rel="openid.server" href="http://www.myopenid.com/server"><link rel="openid.delegate" href="http://emeyer.myopenid.com/"><meta name="google-site-verification" content="I_JFi4WrY6bW7AE2ya5sSlruVvgvrIeRa1IsqO0GB78" /><link rel="alternate" type="application/rss+xml" title="Thoughts From Eric" href="/eric/thoughts/rss2/full"><link rel="alternate" type="application/rss+xml" title="Thoughts From Eric (only technical posts)" href="/eric/thoughts/category/tech/rss2/full"><link rel="alternate" type="application/rss+xml" title="Thoughts From Eric (only personal posts)" href="/eric/thoughts/category/personal/rss2/full"><link rel="alternate" type="application/rss+xml" title="Excuse of the Day" href="/feeds/excuse/rss20.xml"><link rel="stylesheet" href="/ui/meyerweb.css" type="text/css"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@meyerweb"><meta name="twitter:title" content="meyerweb.com"><meta name="twitter:description" content="The web home of Eric A. Meyer, CSS guy; and his wife Kathryn, doctor of nursing."><meta name="twitter:url" content="https://meyerweb.com/"><meta name="twitter:image" content="https://meyerweb.com/ui/i/heart/663399love.png"><meta name="twitter:image:width" content="192"><meta name="twitter:image:height" content="192"><meta property="og:type" content="website"><meta property="og:image" content="https://meyerweb.com/ui/i/hamonshu/fb-og-image.png"><meta name="twitter:description" property="og:description" content="The two videos I was using Whisper on have been published, so you can see for yourself how the captioning worked out.  Designed as trade-show booth reel pieces, they’re below three minutes each, so watching both should take less than ten minutes, even with pauses to scrutinize specific bits of captioning.">
<meta name="twitter:title" property="og:title" content="Echoed Whisper">
<meta name="twitter:url" property="og:url" content="https://meyerweb.com/eric/thoughts/2023/03/31/echoed-whisper/">
<link rel="stylesheet" type="text/css" href="https://meyerweb.com/eric/thoughts/wp-content/themes/meyerweb-2020/style.css">
<link rel="pingback" href="https://meyerweb.com/eric/thoughts/xmlrpc.php">
</head>
<body id="www-meyerweb-com" class="arch single">	
<header role="banner" id="sitemast">
<a href="/">meyerweb.com</a>
<nav role="navigation" aria-label="page" id="skiplinks">
<a href="#main">Main content</a>
<a href="#navigate">Navigation links</a>
<a href="#footer">Footer</a>
</nav>
</header>

<nav role="navigation" aria-label="site" id="navigate">
<ul id="navlinks">
<li id="archLink"><a href="/eric/thoughts/">Post Archives</a></li>
<li id="cssLink"><a href="/eric/css/">CSS Work</a></li>
<li id="toolsLink"><a href="/eric/tools/">Toolbox</a></li>
<li id="writeLink"><a href="/eric/writing.html">Writing</a></li>
<li id="speakLink"><a href="/eric/talks/">Speaking</a></li>
<li id="otherLink"><a href="/other/">Other Stuff</a></li>
<li id="aboutsite"><a href="/ui/about.html">About this site</a></li>
</ul>
</nav>

<!--div id="main"-->

<main role="main" id="thoughts">
				
	
<article role="article" class="single entry">
<header>
<h1 class="title"><a href="https://meyerweb.com/eric/thoughts/2023/03/31/echoed-whisper/" rel="bookmark" title="Permanent Link: Echoed Whisper" aria-current="page">Echoed Whisper</a></h1>
<em class="pubtime">Published  5 months, 6 days past</em>
</header>

<div class="text">
<p>The two videos I was using <a href="https://github.com/openai/whisper">Whisper</a> on have been published, so you can see for yourself how the captioning worked out.  Designed as trade-show booth reel pieces, they’re below three minutes each, so watching both should take less than ten minutes, even with pauses to scrutinize specific bits of captioning.</p>

<figure class="standalone">
<iframe width="100%" style="aspect-ratio: 16/9" src="https://www.youtube.com/embed/CBdefloUvso" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen loading="lazy"></iframe>
</figure>
<figure class="standalone">
<iframe width="100%" style="aspect-ratio: 16/9"" src="https://www.youtube.com/embed/WbW1J7huASY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen loading="lazy"></iframe>
</figure>

<p>As I noted in <a href="https://meyerweb.com/eric/thoughts/2023/03/23/peerless-whisper/">my previous post about this</a>, I only had to make one text correction to the second video, plus a quick find-and-replace to turn “WPE WebKit” into “WPEWebKit”.  For the first video, I did make a couple of edits beyond fixing transcription errors; specifically, I added the dashes and line breaking in this part of the final SubRip Subtitle (SRT) file uploaded to YouTube:</p>

<pre><code>00:00:25,000 --&gt; 00:00:32,000
- Hey tell me, is Michael coming out?
- Affirmative, Mike's coming out.</code>
</pre>

<p>This small snippet actually embodies the two things where Whisper falls down a bit: multiple voices, and caption line lengths.</p>

<p>Right now, Whisper doesn’t even try to distinguish between different voices, the technical term for which is “<a href="https://en.wikipedia.org/wiki/Speaker_diarisation">speaker diarisation</a>”.  This means Whisper ideal for transcribing, say, a conference talk or a single-narrator video.  It’s lot less useful for things like podcasts, because while it will probably get (nearly) all the words right, it won’t even throw in a marker that the voice changed, let alone try to tell which bits belong to a given voice.  You have to go into the output and add those yourself, which for an hourlong podcast could be… quite the task.</p>

<p>There are requests for adding this to Whisper scattered in their GitHub discussions, but I didn’t see any open pull requests or mention of it in the README, so I don’t know if that’s coming or not.  If you do, please <a href="#comments">leave a comment</a>!</p>

<p>As for the length of captions, I agree <a href="https://universeodon.com/@jdeisenberg/110072878523949450">with J David Eisenberg</a>: Whisper too frequently errs on the side of “too long”.  For example, here’s one of the bits Whisper output:</p>

<pre><code>00:01:45,000 --&gt; 00:01:56,000
Here is the dash.js player using MSE, running in a page, and using Widevine DRM to decrypt and play rights-managed video with EME, all fluidly.</code>
</pre>

<p>That’s eleven seconds of static subtitling, with 143 characters of line length.  <a href="https://www.bbc.co.uk/accessibility/forproducts/guides/subtitles/#Line-length">The BBC recommends</a> line lengths at or below 37 characters, and <a href="https://partnerhelp.netflixstudios.com/hc/en-us/articles/215274938-What-is-the-maximum-number-of-characters-per-line-allowed-in-Timed-Text-assets-">Netflix suggests a limit</a> of 42 characters, with actual hard limits for a few languages.  You can throw in line breaks to reduce line length, but should never have more than three lines, which wouldn’t be possible with 143 characters.  But let’s be real, that 11-second caption really should be split in twain, at the absolute minimum.</p>

<p>Whisper does not, as of yet, have a way to request limiting caption lengths, either in time or in text.  There is <a href="https://github.com/openai/whisper/discussions/314">a fairly detailed discussion</a> of this over on Whisper’s repository, with some code graciously shared by people working to address this, but it would be a lot better if Whisper accepted an argument to limit the length of any given bit of output.  And also if it threw in line breaks on its own, say around 40 characters in English, even when not requested.</p>

<p>The last thing I’d like to see improved is speed.  It’s not terribly slow as is, to be clear.  Using the default model size (small), which is what I used for the videos I wrote about, Whisper worked at about 2:1 speed: a two-minute video took about a minute to process.  I tried the next size up, the medium model, and it worked at roughly 1:1.5 speed, taking about an hour fifteen to process a 46-minute video.</p>

<p>The thing is, all that is running solely on the CPU, which in my case is a 12-core M2.  According to <a href="https://github.com/openai/whisper/pull/382">this pull request</a>, problems in one of Whisper’s dependencies, PyTorch, means GPU utilization is essentially unavailable on the hardware I have. (Thanks to Chris Adams for the pointer.) I expect that will be cleared up sooner or later, so the limitation feels minor.</p>

<p>Overall, it’s a powerful tool, with accuracy I still find astounding, only coming up short in quality-of-life features that aren’t critical in some applications (transcribing a talk) or relatively easily worked around in others (hand-correcting caption length in short videos; using a small script to insert line breaks in longer videos).  The lack of speaker diarisation is the real letdown for me, and definitely the hardest to work around, so I hope it gets addressed soon.</p>
<ul class="meta">
<li class="date"><cite><a href="https://meyerweb.com/eric/thoughts/2023/03/31/echoed-whisper/">Echoed Whisper</cite></a> was published on <time>Friday, March 31st, 2023</time>.</li>
<li class="cat">It was assigned to the <a href="https://meyerweb.com/eric/thoughts/category/tech/tools/" rel="category tag">Tools</a> category.</li>
<li class="cmt">There have been <a href="https://meyerweb.com/eric/thoughts/2023/03/31/echoed-whisper/#comments">two replies</a>.</li>
</ul>
</div>
<hr class="fallback">
</article>
		

<!-- You can start editing here. -->

<div id="comments">
<h3>Comments (2)</h3>

	<ol>

	
		<li class="response comment" id="comment-3879079">
			
<div class="text"><p>I’ve experimented with this port: <a href="https://github.com/ggerganov/whisper.cpp" rel="nofollow ugc">https://github.com/ggerganov/whisper.cpp</a></p>
<p>Comparing the speed I got from that with your posted speeds it’s much faster (from memory about 20 minutes for a one hour podcast using the ‘base’ model). This on an m1 as well.</p>
</div><footer>Signed,<br>Joost<br><a href="#comment-3879079"><time>Friday, March 31st, 2023 11:22am</time></a></footer></li>
	
		<li class="response comment" id="comment-3879386">
			
<div class="text"><p>Dunno how useful this is to you, but I found the Whisper API to be incredibly easy to use, especially locally.  Since I&#8217;m forgetful as hell, I carry a tape recorder with me everywhere. Recently, I wrote a small script to transcribe the contents of it automatically, and it was just a tiny bit of Python: <a href="https://git.elfsternberg.com/elf/TCDump/" rel="nofollow ugc">https://git.elfsternberg.com/elf/TCDump/</a></p>
<p>It even runs on a &#8220;CPU-only&#8221; laptop, albeit much more slowly. I imagine you could hack something like this up fairly simply for you own needs, maybe even figure out how to analyze the pauses and figure out which speaker is which.</p>
</div><footer>Signed,<br><a href="https://elfsternberg.com" class="url" rel="ugc external nofollow">Elf M. Sternberg</a><br><a href="#comment-3879386"><time>Sunday, April 2nd, 2023 9:54pm</time></a></footer></li>
	
	</ol>

 



<form action="https://meyerweb.com/eric/thoughts/wp-comments-post.php" method="post" id="commentform">

<header>
<h3>Add Your Thoughts</h3>
<ul id="rss-tb">
<li id="tb"><a href="https://meyerweb.com/eric/thoughts/2023/03/31/echoed-whisper/trackback/" title="Trackback URL">Trackback URL</a></li>
<li><a href="" title="Comments RSS feed">Comments <abbr title="Really Simple Syndication">RSS</abbr> feed'</a></li>
</ul>
</header>

<fieldset>
<div class="chrome-bug-workaround">
<div id="fields">
<p>
<label for="author">Name</label>
<input type="text" name="author" id="author" class="textarea" value="" size="28"> 
<input type="hidden" name="comment_post_ID" value="5238">
<input type="hidden" name="redirect_to" value="/eric/thoughts/2023/03/31/echoed-whisper/">
</p>

<p>
<label for="email">E-mail <small>(required but not displayed)</small></label>
<input type="email" name="email" id="email" value="" size="28"> 
</p>

<p>
<label for="url"><acronym title="Uniform Resource Identifier">URI</acronym> <small>(optional)</small></label>
<input type="text" name="url" id="url" value="" size="28"> 
</p>

</div>
<div id="form-info">
<p><strong>Meyerweb dot com reserves the right to edit or remove any comment</strong>, especially when abusive or irrelevant to the topic at hand.</p>
<p><acronym title="Hypertext Markup Language">HTML</acronym> allowed: <small><code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;s&gt; &lt;strong&gt; &lt;pre class=&quot;&quot;&gt; &lt;kbd&gt; </code></small></p>
</div>
<hr class="fallback">

<!--<p><small><strong>XHTML:</strong> You can use these tags: &lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;s&gt; &lt;strong&gt; &lt;pre class=&quot;&quot;&gt; &lt;kbd&gt; </small></p>-->

<section>
<div id="comment_input">
<label for="comment">Your Comment <small>(<a href="https://github.com/showdownjs/showdown/wiki/Showdown's-Markdown-syntax">Markdown</a> supported)</small></label>
<textarea name="comment" id="comment" cols="70" rows="10" onKeyup="run();"></textarea>
<p>
<input name="submit" type="submit" id="submit" value="Post your e-pistle" />
<input type="hidden" name="comment_post_ID" value="5238" />
<input type="hidden" name="mw_dssb" value="c81f1f833ed7eb7d743ab1d197ecf52b" />
if you’re satisfied with it.</p>
</div>
<div>
<h4>Comment Preview</h4>
<div id="comment_preview"></div>
</div>
<script type="text/javascript" src="/ui/showdown/dist/showdown.min.js"></script>
<script type="text/javascript">
function run() {
  var text = document.getElementById('comment').value,
      target = document.getElementById('comment_preview'),
      converter = new showdown.Converter(),
      html = converter.makeHtml(text);
  target.innerHTML = html;
}
run();
</script>
</section>
</div>
</fieldset>
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="1b5b58b3ae" /></p><p style="display: none !important;"><label>&#916;<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="193"/><script>document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p></form>




</div>

</main>

<div class="prev-next book" id="posts-pn">
<h4>Browse <a href="/eric/thoughts/">the Archive</a></h4>
<p class="prev"><a href="https://meyerweb.com/eric/thoughts/2023/03/23/peerless-whisper/">Peerless Whisper</a></p>
<p class="next"><a href="https://meyerweb.com/eric/thoughts/2023/04/04/ventura-vexations/">Ventura Vexations</a></p>
</div>

</div>

<div role="navigation" aria-label="archive" class="panel" id="related">
<h4>Related Posts</h4>
<p>Browse posts in the <a href="https://meyerweb.com/eric/thoughts/category/tech/tools/" rel="category tag">Tools</a> category.</p>
</div>

<div class="panel" id="feeds">
<h4>Feeds</h4>
	<p>A dispatch of all posts to “Thoughts From Eric” is available in both <a href="https://meyerweb.com/eric/thoughts/feed/" title="Aggregate posts using RSS"><acronym title="Really Simple Syndication">RSS</acronym> 2.0</a>
	and <a href="https://meyerweb.com/eric/thoughts/feed/atom/" title="Aggregate posts using Atom">Atom</a>.</p>
</div>

</div>

<footer id="global">

<div>

<div id="archipelago">
<h4>Identity Archipelago</h4>
<ul>
<li><a rel="me" href="https://twitter.com/meyerweb"><img src="/pix/icons/twitter.png" alt="Twitter"></a></li>
<li><a rel="me" href="https://mastodon.social/@meyerweb"><img src="/pix/icons/mastodon.svg" alt="Mastodon"></a></li>
<li><a rel="me" href="https://github.com/meyerweb"><img src="/pix/icons/github.png" alt="GitHub"></a></li>
<li><a rel="me" href="https://flickr.com/photos/meyerweb/"><img src="/pix/icons/flickr.png" alt="Flickr"></a></li>
<li><a rel="me" href="https://dribbble.com/meyerweb"><img src="/pix/icons/dribbble.png" alt="Dribbble"></a></li>
<li><a rel="me" href="https://facebook.com/meyerweb"><img src="/pix/icons/facebook.png" alt="Facebook"></a></li>
<li><a rel="me" href="https://www.linkedin.com/in/meyerweb"><img src="/pix/icons/linkedin.png" alt="LinkedIn"></a></li>
</ul>
</div>

<div id="excuse">
<div class="panel" id="excuse">
<h4>The <a href="/feeds/excuse/">excuse of the day</a> is</h4>
<p>ozone depletion</p>
</div>
<!--#include virtual="/feeds/excuse/current.html" -->
</div>

<div class="sosumi">
All contents of this site, unless otherwise noted, are &copy;1993-2023<!--#config timefmt="%Y" --><!--#echo var="DATE_LOCAL" --> <strong>Eric A. and Kathryn S. Meyer</strong>.  All Rights Reserved.</div>

<div id="wordpress" class="credits">"<a href="/eric/thoughts/">Thoughts From Eric</a>" is powered by <a href="http://wordpress.org/">WordPress</a>.  Most of the rest of the site is hand-authored.</div>

<div id="design" class="credits">The ink-sketch images used in this site’s design are adapted from <a href="https://archive.org/search.php?query=creator%3A%22Mori%2C+Yu%CC%84zan%2C+-1917%22">Yūzan Mori’s <cite><dfn title="In English: Wave Forms">Hamonshū</dfn></cite>, Volumes 1-3</a>, published in 1903 and made available for public use by the <a href="https://library.si.edu/">Smithsonian Libraries</a> and the <a href="https://archive.org/">Internet Archive</a>.</div>

</div>

</footer>
<!-- WP stuff follows -->
</body>
</html>
<!-- Dynamic page generated in 0.073 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2023-09-06 02:09:30 -->

<!-- Compression = gzip -->